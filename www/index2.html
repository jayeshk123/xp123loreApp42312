<!DOCTYPE html>
<html>
 <head>
  <meta charset=utf-8 />
  <title></title>
  <script src="https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.js"></script>
   <link href="https://api.mapbox.com/mapbox.js/v3.0.1/mapbox.css" rel='stylesheet' />
   <style>
   body { margin:0; padding:0; }
   .map { position:absolute; top:0; bottom:0; width:100%; }
   </style>
   </head>
   <body>
   <style>
   .filter-ui {
   background: #fff;
   position: absolute;
   top: 10px;
   right: 10px;
   z-index: 100;
   padding: 10px;
   border-radius: 3px;
   }
   
   .filter-ui input {
   vertical-align: middle;
   }
   </style>
   <nav id='filters' class='filter-ui'></nav>
   <div id='map-toggle' class='map'></div>
   <script>
   L.mapbox.accessToken = 'pk.eyJ1IjoibmhlbW1hZHkiLCJhIjoiY2ozZDNtZjlmMDA0NTMxcWxqcm1qN2xoMCJ9.O3TLqQSOyIadDbjNpM4zlA';
   
   var mapToggle = L.mapbox.map('map-toggle')
   .setView([38.9, -77], 11)
   .addLayer(L.mapbox.tileLayer('mapbox.light'));
   
   var filters = document.getElementById('filters');
   
   var markers = L.mapbox.featureLayer().loadURL('/help/data/examples/dc-weekend-picks.geojson');
   
   markers.on('ready', function(e) {
   var typesObj = {},
   types = [];
   var features = e.target._geojson.features;
   for (var i = 0; i < features.length; i++) {
   typesObj[features[i].properties['marker-symbol']] = true;
   }
   for (var key in typesObj) {
   if ({}.hasOwnProperty.call(typesObj, key)) {
   types.push(key);
   }
   }
   var checkboxes = [];
   for (var j = 0; j < types.length; j++) {
   var item = filters.appendChild(document.createElement('div'));
   var checkbox = item.appendChild(document.createElement('input'));
   var label = item.appendChild(document.createElement('label'));
   checkbox.type = 'checkbox';
   checkbox.id = types[j];
   checkbox.checked = true;
   label.innerHTML = types[j];
   label.setAttribute('for', types[j]);
   checkbox.addEventListener('change', update);
   checkboxes.push(checkbox);
   }
   
   function update() {
   var enabled = {};
   for (var k = 0; k < checkboxes.length; k++) {
   if (checkboxes[k].checked) enabled[checkboxes[k].id] = true;
   }
   markers.setFilter(function(feature) {
   return feature.properties['marker-symbol'] in enabled;
   });
   }
   }).addTo(mapToggle);
   mapToggle.scrollWheelZoom.disable();
   </script>
   </body>
   </html>